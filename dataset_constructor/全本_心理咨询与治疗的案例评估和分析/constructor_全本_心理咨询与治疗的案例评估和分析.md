# 抽取流程：

## 1.人工划分书本内容

由于《心理咨询与治疗的案例评估和分析》这本书的内容编排比较混乱，因此需要人工先对书本内容进行划分。书本内容总的来说分为理论和案例两个大的部分。

理论一般在一章开头的地方，对于这本书来说理论部分已经放在了“理论部分/input”这个路径下。

案例部分的内容也分为两类，一类是对话形式的案例，另一类则以案例描述加案例解析的方式呈现。对于对话类型的案例，已经单独划分出来，用于后面构建对话数据集。对于以案例描述加案例解析的方式呈现的案例，根据对书本的理解，分为以下三个部分进行抽取：1、背景与个案概念化；2、治疗方案；3、案例分析与评价。你可以在每个案例对应的文件夹下找到这些内容，注意，由于各个案例呈现方式都不太相同，可能有一些案例会缺失一些部分的内容，这是正常现象。

## 2.人工抽取案例部分数据

在每个案例各个部分内容的文件夹下都会这个部分的原文以及有一个prompt文件，可以把这个prompt的内容发给gpt-o1，然后根据他的回复以及书本原文来修正数据。

这个部分的工作非常重要，模型生成的数据大部分在背景方面都做得不太好，背景内容非常少，另外容易在生成回答时出现幻觉，回答一些跟给定文本不相关的内容，为了构建高质量数据集应该要进行严格的人工修正。

## 3.拓展案例部分数据

extend_instruction.ipynb这个文件是用来拓展数据的，但目前只是根据问题的问法进行了拓展，可以小改一下这个程序和prompt，来让模型把问题、背景、回答三者都进行改写，已获得更丰富的数据。

## 4.自动抽取与拓展理论部分数据

在“理论部分”这个文件夹下还写了一个自动获取理论部分sft数据的脚本”“get_data_theory.py“，但因为公司gpt账号gpt4-turbo的并发数，所以脚本有时在遇到并发数较大时会报错，如果仍需要使用gpt4-turbo来生成的话，可以限制一下并发量，再在api账户上充点钱以免出现余额不足的情况。

”理论部分“的文件夹下有一个第三章理论部分生成数据的样例，可以根据效果来考虑是否继续使用gpt4-turbo。





